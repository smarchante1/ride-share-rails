<h2><%= @passenger.name%></h2>

<div>
  <img src="http://placekitten.com/200/300" alt="A kitty user">
</div>


<% nil_trips = @passenger.trips.where(rating: nil) %>
<%# add logic to change driver status back to true%>
<% if nil_trips.length > 0 %>
  <%= form_with model: nil_trips.first, class: "rating" do |f| %> 
  
  <%= f.label :rating %>
  <%= f.text_field :rating %>

 <%= f.submit "Submit Rating", class: "rating-save-button" %>  

<% end %>

<% else %> 
  <%= link_to "Request Ride", passenger_trips_path(@passenger.id), method: :post %>
<% end %>

<ul>
<% @passenger.trips.each do |trip| %>
  <li> 
  <%= link_to "Trip ID: #{trip.id}", passenger_trip_path(@passenger.id, trip.id)%>
  </li>
  <li> 
  <%= "Trip Date: #{trip.date}"%>
  </li>
  <li> 
  <%= link_to "Driver Name: #{Driver.find(trip.driver_id).name}", driver_path(trip.driver_id)%>
  </li>
   <li> 
  <%= "Price: $#{trip.cost / 100}"%>
  </li>
   <li> 
  <%= "Rating: #{trip.rating}"%>
  </li>
   <li> 
  <%= link_to "Edit Trip", edit_trip_path(trip.id) %>
  </li>
   <li> 
  <%= link_to "Delete Trip", trip_path(trip.id), method: :delete, data: {confirm: "Are you sure you want to delete this trip?"} %>
  </li>
<% end %>
</ul>

<h3><%= "Passenger total charges $#{@passenger.total_charges}"%></h3>

<%= link_to "Delete Passenger", passenger_path(@passenger.id), method: :delete, data: {confirm: "Are you sure you want to delete this passenger? All associated trip data will also be deleted."}%>
<%= link_to "Edit passenger", edit_passenger_path(@passenger.id) %>
<%= link_to "Back to list of all passengers", passengers_path %>